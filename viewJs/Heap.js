var MarkAreaData = [
	[{
		coord: [1, 2]
		// "xAxis": "1",
		// "yAxis": "2"
	}, {
		coord: [6, 4]
		// "xAxis": "6",
		// "yAxis": "4"
	}],
	[{
		"xAxis": "1",
		"yAxis": "4"
	}, {
		"xAxis": "6",
		"yAxis": "6"
	}],
	[{
		"xAxis": "1",
		"yAxis": "6"
	}, {
		"xAxis": "6",
		"yAxis": "8"
	}],
	[{
		"xAxis": "1",
		"yAxis": "8"
	}, {
		"xAxis": "6",
		"yAxis": "10"
	}],
	[{
		"xAxis": "7",
		"yAxis": "3"
	}, {
		"xAxis": "9",
		"yAxis": "10"
	}],
	[{
		"xAxis": "10",
		"yAxis": "1"
	}, {
		"xAxis": "12",
		"yAxis": "2"
	}],
	[{
		"xAxis": "10",
		"yAxis": "4"
	}, {
		"xAxis": "12",
		"yAxis": "6"
	}],
	[{
		"xAxis": "10",
		"yAxis": "6"
	}, {
		"xAxis": "12",
		"yAxis": "10"
	}],
	[{
		"xAxis": "10",
		"yAxis": "10"
	}, {
		"xAxis": "12",
		"yAxis": "12"
	}],
	[{
		"xAxis": "10",
		"yAxis": "14"
	}, {
		"xAxis": "12",
		"yAxis": "15"
	}],
	[{
		"xAxis": "19",
		"yAxis": "2"
	}, {
		"xAxis": "29",
		"yAxis": "12"
	}],
	[{
		"xAxis": "15",
		"yAxis": "2"
	}, {
		"xAxis": "19",
		"yAxis": "12"
	}],
	[{
		"xAxis": "19",
		"yAxis": "14"
	}, {
		"xAxis": "21",
		"yAxis": "16"
	}],
	[{
		"xAxis": "21",
		"yAxis": "14"
	}, {
		"xAxis": "23",
		"yAxis": "16"
	}],
	[{
		"xAxis": "23",
		"yAxis": "14"
	}, {
		"xAxis": "27",
		"yAxis": "16"
	}],
	[{
		"xAxis": "27",
		"yAxis": "14"
	}, {
		"xAxis": "29",
		"yAxis": "16"
	}],
	[{
		"xAxis": "2",
		"yAxis": "12"
	}, {
		"xAxis": "6",
		"yAxis": "14"
	}],
	[{
		"xAxis": "0",
		"yAxis": "13"
	}, {
		"xAxis": "1",
		"yAxis": "14"
	}],
	[{
		"xAxis": "2",
		"yAxis": "15"
	}, {
		"xAxis": "3",
		"yAxis": "16"
	}],
	[{
		"xAxis": "4",
		"yAxis": "15"
	}, {
		"xAxis": "5",
		"yAxis": "16"
	}],
	[{
		"xAxis": "7",
		"yAxis": "15"
	}, {
		"xAxis": "8",
		"yAxis": "16"
	}],
	[{
		"xAxis": "5",
		"yAxis": "15"
	}, {
		"xAxis": "6",
		"yAxis": "16"
	}],
	[{
		"xAxis": "15",
		"yAxis": "15"
	}, {
		"xAxis": "16",
		"yAxis": "16"
	}],
	[{
		"xAxis": "17",
		"yAxis": "15"
	}, {
		"xAxis": "18",
		"yAxis": "16"
	}],
	[{
		"xAxis": "19",
		"yAxis": "0"
	}, {
		"xAxis": "20",
		"yAxis": "1"
	}],
	[{
		"xAxis": "1",
		"yAxis": "-14"
	}, {
		"xAxis": "6",
		"yAxis": "-6"
	}],
	[{
		"xAxis": "1",
		"yAxis": "-6"
	}, {
		"xAxis": "6",
		"yAxis": "-4"
	}],
	[{
		"xAxis": "0",
		"yAxis": "-3"
	}, {
		"xAxis": "6",
		"yAxis": "0"
	}],
	[{
		"xAxis": "10",
		"yAxis": "-15"
	}, {
		"xAxis": "12",
		"yAxis": "-14"
	}],
	[{
		"xAxis": "10",
		"yAxis": "-12"
	}, {
		"xAxis": "12",
		"yAxis": "-10"
	}],
	[{
		"xAxis": "10",
		"yAxis": "-10"
	}, {
		"xAxis": "12",
		"yAxis": "-8"
	}],
	[{
		"xAxis": "10",
		"yAxis": "-2"
	}, {
		"xAxis": "12",
		"yAxis": "-1"
	}],
	[{
		"xAxis": "0",
		"yAxis": "0"
	}, {
		"xAxis": "10",
		"yAxis": "2"
	}],
	[{
		"xAxis": "10",
		"yAxis": "0"
	}, {
		"xAxis": "19",
		"yAxis": "1"
	}],
	[{
		"xAxis": "20",
		"yAxis": "0"
	}, {
		"xAxis": "29",
		"yAxis": "1"
	}],
	[{
		"xAxis": "29",
		"yAxis": "0"
	}, {
		"xAxis": "30",
		"yAxis": "16"
	}],
	[{
		"xAxis": "12",
		"yAxis": "2"
	}, {
		"xAxis": "15",
		"yAxis": "12"
	}],
	[{
		"xAxis": "0",
		"yAxis": "2"
	}, {
		"xAxis": "1",
		"yAxis": "13"
	}],
	[{
		"xAxis": "1",
		"yAxis": "10"
	}, {
		"xAxis": "6",
		"yAxis": "12"
	}],
	[{
		"xAxis": "0",
		"yAxis": "15"
	}, {
		"xAxis": "19",
		"yAxis": "16"
	}],
	[{
		"xAxis": "0",
		"yAxis": "14"
	}, {
		"xAxis": "1",
		"yAxis": "15"
	}],
	[{
		"xAxis": "-0",
		"yAxis": "-16"
	}, {
		"xAxis": "30",
		"yAxis": "-14"
	}],
	[{
		"xAxis": "12",
		"yAxis": "-14"
	}, {
		"xAxis": "30",
		"yAxis": "0"
	}],
	[{
		"xAxis": "6",
		"yAxis": "-1"
	}, {
		"xAxis": "12",
		"yAxis": "0"
	}],
	[{
		"xAxis": "10",
		"yAxis": "-8"
	}, {
		"xAxis": "12",
		"yAxis": "-4"
	}],
	[{
		"xAxis": "0",
		"yAxis": "-14"
	}, {
		"xAxis": "1",
		"yAxis": "-3"
	}],
	[{
		"xAxis": "1",
		"yAxis": "-4"
	}, {
		"xAxis": "6",
		"yAxis": "-3"
	}]

]


var dom = document.getElementById("heat");
var myChart = echarts.init(dom);

var time_line = []
var time_data = []
var x_data = []
var y_data = []
var t;
for (var i = -16; i <= 16; i++) {
	y_data.push(i)
}
var test_data = []
for (var i = 0; i <= 30; i++) {
	x_data.push(i)
}

var xAxis_data = []
xAxis_data.push(x_data)
var pNum_data = []
var _max = 0;
var _data = [];
for (var _i = 0; _i < x_data.length; _i++) {
	for (var _j = 0; _j < y_data.length; _j++) {
		_data.push([_i, _j, 0])
	}
}

function StartSet(data) {

}


var JsonStr = 'json/day3_time.json'
var TimeLine_Interval = 10

// function getValue(){
// 	var radio = document.getElementsByName("radiobutton");
// 	for(var i = 0 ; i < radio.length ; i++){
// 		if(radio[i].checked ){
// 			JsonStr = "json/" + radio[i].value + "_time.json";
// 		}
// 	}
// }

// function getValue1(){
// 	if(JsonStr == "json/day3_time.json")
// 		JsonStr = "json/day1_time.json"
// 	else if (JsonStr == "json/day1_time.json")
// 		JsonStr = "json/day2_time.json"
// 	else if(JsonStr == "json/day2_time.json")
// 		JsonStr = "json/day3_time.json"
// }

$(function() {
    _ajax(JsonStr);
    $("#selectID").change(function() {
        var selectValue = $("#selectID").val();
        switch(selectValue){
            case 'one':
               _ajax('json/day1_time.json');
               break;
            case 'two':
               _ajax('json/day2_time.json');
               break;
            default:
               _ajax('json/day3_time.json'); 
        }
    });
		
	$("#inputID").change(function(){
		var dom = document.getElementById("inputID");
		TimeLine_Interval = dom.value;
		_ajax(JsonStr);
	})
});

function show(){
	var dom = document.getElementById("inputID");
	TimeLine_Interval = dom.value;
}

function _ajax(url) {
    $.ajax({
        type: 'get',
        url: url,
        success: function(data) {
            option = {
            	baseOption: {
            		// backgroundColor: '#c19191', //yes2
            		//backgroundColor:'#d2c8c8',//yes2
            		//backgroundColor: '#d8cbbb', //yes1
            		//backgroundColor: '#33313b',
            		//backgroundColor:'#0e2832',
            		timeline: {
            			axisType: 'value',
            			orient: 'horizontal',
            			autoPlay: true,
            			//inverse: true,
            			playInterval: 1000,
            			left: null,
            			bottom: "1%",
            			right: "5%",
            			width: 500,
            			height: null,
            			data: [],
            			label: {
            				normal: {
            					show: false,
            				}
            			},
            		},
            		title: {
            			left: 'center',
            			text: ' Points',
            			subtext: 'Fake data',
            			textStyle: {
            				color: '#eee'
            			},
            			subtextStyle: {
            				color: '#999'
            			}
            		},
            		tooltip: {},
            		toolbox: {
            			right: 20,
            			iconStyle: {
            				borderColor: '#eee'
            			},
            			feature: {
            				dataZoom: {},
            				 myTool : {    				
            				          show : true,           				
            				          title : '自定义扩展方法',          				
            				          icon : 'image://http://echarts.baidu.com/images/favicon.png',          				
            				          onclick : function (){        				
            				              getValue1();
            							  //mychart.setOption(baseOption,true)            				
            				          }            				
            				       },
							}
						},
            		grid: {
						// show:true,
            			right: 70,
            			bottom: 70,
						//backgroundColor:'black'
            		},
            		xAxis: [{
            			data: x_data,            			
            			position: 'bottom',
            			splitNumber: 31,
            			scalse: false,
            			axisLabel: {
            				//color: '#ccc',
            				// color: '#33313b',
            				fontSize: 16
            			},
            			// splitLine: {
            			// 	show: true,
            			// 	lineStyle: {
            			// 		color: '#bbbbbb',
            			// 		width: 1,
            			// 		type: 'solid'
            			// 	}
            			// }
						// splitArea:{
						// 	show:true,
						// 	areaStyle:{
						// 		color:'#bbbbbb'
						// 	}
						// }
            		}],
            		yAxis: [{
            			data: y_data,            			
            			splitNumber: 34,
            			// min : 0,
            			// max : 32,
            			//interval : 0,
            			scalse: false,
            			//maxInterval:1,
            			axisTick: {
            				show: true,
            				alignWithLabel: true,
            			},
            			axisLabel: {
            				//color: '#ccc',
            				// color: '#33313b',
            				fontSize: 16
            			},
            			// splitLine: {
            			// 	show: true,
            			// 	interval: 0,
            			// 	lineStyle: {
            			// 		color: '#bbbbbb',
            			// 		width: 1,
            			// 		type: 'solid'
            			// 	}
            			// }
						// splitArea:{
						// 	show:true,
						// 	areaStyle:{
						// 		color:'white'
						// 	}
						// }
            		}],
            		animation: false,
					visualMap: {
						min: 0,
						max: _max,
						calculable: true,
						realtime: false,
						inRange: {
							// color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43',
							// 	'#d73027', '#a50026'
							// ]
							color: ['#fff','#010059', '#313695', '#4575b4', '#fee090', '#fdae61', '#f46d43',
								'#d73027', '#a50026', '#8e2e6a', '#480032', '#62374e', '#33313b'
							] //yes1
							// color: ['#010059','#313695', '#4575b4', '#fee090', '#fdae61', '#f46d43',
							// 	'#d73027', '#a50026'
							// ]//yes2(yes1掐头去尾)
						},
						right: "1%",
						bottom: "7%"
					}
            
            	},
            	options: [],
            };
            
            for (var i = 0; i < data.length; i++) {
            	for (var j = 0; j < data[i].length; j++) {
            		if (data[i][j][1][0] == 1) {
            			y = 15 - data[i][j][1].slice(1, 3);
            			x = parseInt(data[i][j][1].slice(3));
            			_data[x * y_data.length + y][2]++;
            			t = _data[x * y_data.length + y][2];
            			if (t > _max) {
            				_max = t;
            			}
            		} else if (data[i][j][1][0] == 2) {
            			y = 15 - data[i][j][1].slice(1, 3) + 16;
            			x = parseInt(data[i][j][1].slice(3));
            			_data[x * y_data.length + y][2]++;
            			t = _data[x * y_data.length + y][2];
            			if (t > _max) {
            				_max = t;
            			}
            		}
            	}
            	if (i % TimeLine_Interval == 0) {
            
            		option.baseOption.timeline.data.push(i + 1);
            
            		option.options.push({
            				
            				series: [{
            						type: 'heatmap',
            						data: _data,
            						symbolSize: 5,
            						//type: 'scatter',
            						itemStyle: {
            							color: '#128de3',
            							opacity: 0.4
            						},
            						blendMode: 'lighter',
            						large: true,
            
            						// markArea: { //标记区域
            						// 	itemStyle: { //全局的
            						// 		color: 'rgba(255, 255, 255, 0)',
            						// 		borderWidth: '0.5',
            						// 		borderColor: '#283148',
            						// 	},
										//data:MarkAreaData
            						}],            
            				}); 
						_data = []
            			for (var _i = 0; _i < x_data.length; _i++) {
            				for (var _j = 0; _j < y_data.length; _j++) {
            					_data.push([_i, _j, 0])
            				}
            			}
            		}
            
            	}
				option.baseOption.visualMap.max = _max;
            	myChart.setOption(option,true);
        }
    });
}


